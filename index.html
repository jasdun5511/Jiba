<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>口袋妖怪网页版 - 极简GBA对战</title>
    <style>
        body { background-color: #333; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; font-family: 'Courier New', Courier, monospace; }
        #game-container { width: 400px; height: 300px; background: #f8f8f8; border: 4px solid #000; position: relative; overflow: hidden; }
        
        /* 战场布局 */
        .battle-scene { height: 70%; position: relative; }
        .monster { width: 80px; height: 80px; position: absolute; border-radius: 50%; }
        #enemy { background: #3498db; top: 30px; right: 40px; }
        #player { background: #e74c3c; bottom: 20px; left: 40px; }

        /* 血条 */
        .status-box { position: absolute; background: rgba(255,255,255,0.8); border: 2px solid #000; padding: 5px; width: 120px; }
        #enemy-status { top: 20px; left: 20px; }
        #player-status { bottom: 60px; right: 20px; }
        .hp-bar { width: 100%; height: 8px; background: #ccc; margin-top: 5px; }
        .hp-fill { height: 100%; background: #2ecc71; width: 100%; transition: width 0.3s; }

        /* 对话框 */
        #message-box { height: 30%; background: #000; color: white; padding: 15px; box-sizing: border-box; font-size: 16px; cursor: pointer; }
        
        /* 按钮 */
        .controls { position: absolute; bottom: 10px; right: 10px; display: none; }
        button { padding: 5px 15px; cursor: pointer; background: #fff; border: 2px solid #000; font-weight: bold; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="battle-scene">
        <div id="enemy-status" class="status-box">
            <div>水箭龟</div>
            <div class="hp-bar"><div id="enemy-hp" class="hp-fill"></div></div>
        </div>
        <div id="enemy" class="monster"></div>

        <div id="player-status" class="status-box">
            <div>小火龙</div>
            <div class="hp-bar"><div id="player-hp" class="hp-fill"></div></div>
        </div>
        <div id="player" class="monster"></div>
    </div>

    <div id="message-box">野生的 水箭龟 出现了！</div>
    <div class="controls" id="controls">
        <button onclick="attack()">攻击 (A)</button>
    </div>
</div>

<script>
    let playerHP = 100;
    let enemyHP = 100;
    const msgBox = document.getElementById('message-box');
    const controls = document.getElementById('controls');

    // 初始点击进入战斗
    msgBox.onclick = () => {
        if (msgBox.innerText.includes("出现")) {
            msgBox.innerText = "你要做什么？";
            controls.style.display = 'block';
        }
    };

    function updateHP() {
        document.getElementById('player-hp').style.width = playerHP + '%';
        document.getElementById('enemy-hp').style.width = enemyHP + '%';
    }

    function attack() {
        controls.style.display = 'none';
        
        // 玩家攻击
        let dmg = Math.floor(Math.random() * 15) + 10;
        enemyHP -= dmg;
        if (enemyHP < 0) enemyHP = 0;
        updateHP();
        msgBox.innerText = `小火龙使用了 喷射火焰！造成了 ${dmg} 点伤害。`;

        if (enemyHP <= 0) {
            setTimeout(() => { msgBox.innerText = "敌方倒下了！你赢了！"; }, 1500);
            return;
        }

        // 敌人反击
        setTimeout(() => {
            let eDmg = Math.floor(Math.random() * 12) + 8;
            playerHP -= eDmg;
            if (playerHP < 0) playerHP = 0;
            updateHP();
            msgBox.innerText = `水箭龟使用了 水枪！造成了 ${eDmg} 点伤害。`;
            
            if (playerHP <= 0) {
                setTimeout(() => { msgBox.innerText = "你眼前陷入了一片漆黑..."; }, 1500);
            } else {
                setTimeout(() => { 
                    msgBox.innerText = "你要做什么？"; 
                    controls.style.display = 'block';
                }, 1500);
            }
        }, 1500);
    }
</script>

</body>
</html>
